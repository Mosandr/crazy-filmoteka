(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1OFI":function(e,t,n){var i=n("mp5j");e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var s,a=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",u=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item" data-id="'+u(typeof(s=null!=(s=l(n,"id")||(null!=t?l(t,"id"):t))?s:o)===c?s.call(a,{name:"id",hash:{},data:r,loc:{start:{line:1,column:35},end:{line:1,column:41}}}):s)+'">\r\n    <img class="gallery__img" src="https://image.tmdb.org/t/p/w500'+u(typeof(s=null!=(s=l(n,"poster_path")||(null!=t?l(t,"poster_path"):t))?s:o)===c?s.call(a,{name:"poster_path",hash:{},data:r,loc:{start:{line:2,column:66},end:{line:2,column:81}}}):s)+'" alt="'+u(typeof(s=null!=(s=l(n,"title")||(null!=t?l(t,"title"):t))?s:o)===c?s.call(a,{name:"title",hash:{},data:r,loc:{start:{line:2,column:88},end:{line:2,column:97}}}):s)+' movie poster">\r\n    <h3 class="gallery__movie-title">'+u(typeof(s=null!=(s=l(n,"title")||(null!=t?l(t,"title"):t))?s:o)===c?s.call(a,{name:"title",hash:{},data:r,loc:{start:{line:3,column:37},end:{line:3,column:46}}}):s)+'</h3>\r\n    <p class="gallery__movie-genre">'+u(typeof(s=null!=(s=l(n,"genres")||(null!=t?l(t,"genres"):t))?s:o)===c?s.call(a,{name:"genres",hash:{},data:r,loc:{start:{line:4,column:36},end:{line:4,column:46}}}):s)+" | "+u(typeof(s=null!=(s=l(n,"year")||(null!=t?l(t,"year"):t))?s:o)===c?s.call(a,{name:"year",hash:{},data:r,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):s)+' <span class="gallery__movie-rating">'+u(typeof(s=null!=(s=l(n,"vote_average")||(null!=t?l(t,"vote_average"):t))?s:o)===c?s.call(a,{name:"vote_average",hash:{},data:r,loc:{start:{line:4,column:94},end:{line:4,column:110}}}):s)+"</span>\r\n    </p>\r\n</li>"},useData:!0})},"4AnZ":function(e,t,n){var i=n("vy/h"),r=n("4din"),s='<header data-js="page-header" class="page-header"> <div class="container"> <nav class="site-nav"> <a class="logo" href="./index.html"> <svg class="logo-svg" width="24px" height="24px" alt="logo"> <use href="'+i(r,{hash:"#logo"})+'"></use> </svg> <span class="logo-text">Filmoteka</span> </a> <ul class="site-nav-link list"> <li data-js="home-btn" class="item current"> <a><span>HOME</span> </a></li> <li data-js="lib-btn" class="item"> <a><span>MY LIBRARY</span> </a></li> </ul> </nav> <div id="auth" class=""> <p class="logged-out is-hidden"> <a href="#" class="" id="logout"> <i class="material-icons"> logout </i> </a> </p> <p class="logged-in is-hidden"> <a href="#" class="modal-trigger" data-target="modal-login"> <i class="material-icons"> perm_identity </i> </a> </p> </div> <form data-js="search-form" class="search-form" id="search-form"> <label class="search-form-label"> <input class="search-form-input" type="text" name="query" autocomplete="off" placeholder="Поиск фильмов"/> <button type="button" class="input-search-btn"> <svg class="input-search-svg" width="12px" height="12px" alt="input-search"> <use class="input-search-svg-icon" href="'+i(r,{hash:"#input-search"})+'"></use> </svg> </button> <p class="search-form__error"></p> </label> </form> <div class="header-button"> <button data-js="button-watch" class="button watch is-hidden is-active" type="button"> <span>WATCHED</span> </button> <button data-js="button-queue" class="button queue is-hidden" type="button"> <span>QUEUE</span> </button> </div> </div> </header> ';e.exports=s},"4din":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMCIgaGVpZ2h0PSIwIiBjbGFzcz0iaGlkZGVuIj4NCiAgPHN5bWJvbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNjcgNjciIGlkPSJhcnJvdy1yaWdodCI+DQogICAgPGltYWdlIHg9IjExIiB5PSIxMSIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjQ1IiB4bGluazpocmVmPSJkYXRhOmltZy9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDMEFBQUF0Q0FRQUFBQ1FFeW9SQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk5BQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFBQW1KTFIwUUFBS3FOSXpJQUFBQUpjRWhaY3dBQUxpTUFBQzRqQVhpbFAzWUFBQUFIZEVsTlJRZmxBZ3dTQXljcnpsMy9BQUFBcjBsRVFWUkl4KzNYdlEzQ01CQ0c0WmVrb2J5UzBpTXdndWxnUWtyUFFSVTJnQTNJQnNrR3BrRW9ndWFTM0FrSjNibHk0Y2ZXSi8vSW9DMmgwRkZJNmhIcWVsQ3BWQWIydG5CK3dUUHdac0UwUW1lNzh0dGszY2F4U09DQkJ4NzRuK0FiQVBKcXZDQ1Qvc2lCKy9lY05tMUFXczRjN2JKNTE1WmQ0L0ZDQTVBYWVpZTZoK1NWdGVzT1dWOXVoeWJnZ0FNTytLZXc0MThtejRlWGZPN01MdnJQUU5SUnRHcjZnakJ5NWFSOXFKOFJQRzN4ajRuNnVnQUFBQUJKUlU1RXJrSmdnZz09Ij48L2ltYWdlPg0KICA8L3N5bWJvbD4NCiAgPHN5bWJvbCBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiIgaWQ9ImlucHV0LXNlYXJjaCI+DQogICAgPHBhdGggZD0iTTUuNSA5LjVhNCA0IDAgMTAwLTggNCA0IDAgMDAwIDh6bTUgMUw4LjMyNSA4LjMyNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjwvcGF0aD4NCiAgPC9zeW1ib2w+DQogIDxzeW1ib2wgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGlkPSJsb2dvIj4NCiAgICA8cGF0aCBkPSJNMTkuODIgMkg0LjE4QTIuMTggMi4xOCAwIDAwMiA0LjE4djE1LjY0QTIuMTggMi4xOCAwIDAwNC4xOCAyMmgxNS42NEEyLjE4IDIuMTggMCAwMDIyIDE5LjgyVjQuMThBMi4xOCAyLjE4IDAgMDAxOS44MiAyek03IDJ2MjBNMTcgMnYyME0yIDEyaDIwTTIgN2g1TTIgMTdoNW0xMCAwaDVNMTcgN2g1IiBzdHJva2U9IiM4MTgxODEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48L3BhdGg+DQogIDwvc3ltYm9sPg0KICA8c3ltYm9sIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE0IDEzIiBpZD0ibG92ZSI+DQogICAgPHBhdGggZD0iTTcgMTIuODhsLS45OC0uOThDMi4zOCA4LjY4IDAgNi41MSAwIDMuODUgMCAxLjY4IDEuNjggMCAzLjg1IDAgNS4wNCAwIDYuMjMuNTYgNyAxLjQ3IDcuNzcuNTYgOC45NiAwIDEwLjE1IDAgMTIuMzIgMCAxNCAxLjY4IDE0IDMuODVjMCAyLjY2LTIuMzggNC44My02LjAyIDguMDVsLS45OC45OHoiIGZpbGw9IiNGRjZCMDgiPjwvcGF0aD4NCiAgPC9zeW1ib2w+DQogIDxzeW1ib2wgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiIGlkPSJhcnJvdy1sZWZ0Ij4NCiAgICA8cGF0aCBkPSJNMTIuNjY3IDhIMy4zMzNNOCAxMi42NjdMMy4zMzMgOCA4IDMuMzMzIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4zMzMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PC9wYXRoPg0KICA8L3N5bWJvbD4NCjwvc3ZnPg=="},LWga:function(e,t){e.exports='<button class="watched" type="submit">watched</button> <button class="queueBtn" type="submit">queue</button> <div id="modal-signup" class="modal"> <div class="modal-content"> <h4>Sign up</h4> <br/> <form id="signup-form"> <div class="input-field"> <input type="email" id="signup-email" required/> <label for="signup-email">Email address</label> </div> <div class="input-field"> <input type="password" id="signup-password" required/> <label for="signup-password">Choose password</label> </div> <button class="">Sign up</button> <p class="error pink-text center-align"></p> </form> </div> </div> <div id="modal-login" class="modal"> <div class="modal-content"> <h4>Login</h4> <br/> <form id="login-form"> <div class="input-field"> <input type="email" id="login-email" required/> <label for="login-email">Email address</label> </div> <div class="input-field"> <input type="password" id="login-password" required/> <label for="login-password">Your password</label> </div> <button class="">Login</button> <p> New user? <a href="#" class="modal-trigger" data-target="modal-signup"> Sign up </a> </p> <p class="error pink-text center-align"></p> </form> </div> </div> '},QfWi:function(e,t,n){"use strict";n.r(t);n("yjly"),n("IlJM"),n("IvQZ"),n("uQK7"),n("8cZI"),n("lmye"),n("x3Br"),n("WB5j"),n("D/wG"),n("JBxO"),n("FdtR"),n("4NM0"),n("wcNg");var i=function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{linkHome:document.querySelector('[data-js="home-btn"]'),linkLib:document.querySelector('[data-js="lib-btn"]'),searcForm:document.querySelector('[data-js="search-form"]'),buttonWatch:document.querySelector('[data-js="button-watch"]'),buttonQueue:document.querySelector('[data-js="button-queue"]'),headerBackground:document.querySelector('[data-js="page-header"]')}},t.init=function(){this.refs.linkHome.addEventListener("click",this.onHomeLinkClick.bind(this)),this.refs.linkLib.addEventListener("click",this.onMyLibraryLinkClick.bind(this))},t.onMyLibraryLinkClick=function(e){this.refs.linkHome.classList.remove("current"),this.refs.linkLib.classList.add("current"),this.refs.searcForm.classList.add("is-hidden"),this.refs.buttonQueue.classList.remove("is-hidden"),this.refs.buttonWatch.classList.remove("is-hidden"),this.refs.headerBackground.classList.add("lib"),this.initLibraryButtons(),this.onWatchedClick()},t.onHomeLinkClick=function(e){this.refs.linkHome.classList.add("current"),this.refs.linkLib.classList.remove("current"),this.refs.searcForm.classList.remove("is-hidden"),this.refs.buttonQueue.classList.add("is-hidden"),this.refs.buttonWatch.classList.add("is-hidden"),this.refs.headerBackground.classList.remove("lib"),this.disabelLibraryButtons()},t.initLibraryButtons=function(){this.refs.buttonWatch.addEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonQueue.addEventListener("click",this.onQueueClick.bind(this))},t.onWatchedClick=function(){this.refs.buttonWatch.classList.add("is-active"),this.refs.buttonQueue.classList.remove("is-active")},t.onQueueClick=function(){this.refs.buttonQueue.classList.add("is-active"),this.refs.buttonWatch.classList.remove("is-active")},t.disabelLibraryButtons=function(){this.refs.buttonQueue.removeEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonWatch.removeEventListener("click",this.onQueueClick.bind(this))},e}(),r=function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{teamLink:document.querySelector('[data-js="team-link"]')}},t.init=function(){this.refs.teamLink.addEventListener("click",this.onTeamLinkClick.bind(this))},t.onTeamLinkClick=function(e){console.log("Now team modal must be open")},e}(),s=n("1OFI"),a=n.n(s),o=function(){function e(){this.galleryRef=document.querySelector('[data-js="movie-gallery"]')}var t=e.prototype;return t.render=function(e){this.clear();var t=e.reduce((function(e,t){return e+a()(t)}),"");this.galleryRef.insertAdjacentHTML("afterbegin",t)},t.clear=function(){this.galleryRef.innerHTML=""},e}(),c=function(){function e(){}return e.prototype.renderMovieModal=function(e){console.log("А тут должна открыться модалка фильма")},e}(),u=n("Np6Y"),l=function(){function e(){}return e.prototype.create=function(e,t){void 0===e&&(e=1);var n=u.create("search",{prelink:"crazy-filmoteka/",current:e,rowsPerPage:20,totalResult:t}).render();document.getElementById("paging").innerHTML=n},e}(),d=(n("Muwe"),n("X5mX"),{key:"62af7111fb0063930df9c7b53547034d",baseUrl:"https://api.themoviedb.org/3",names:{tranding:"/trending/movie/week",search:"/search/movie",movie:"/movie/",genres:"/genre/movie/list"}});function h(e,t,n,i,r,s,a){try{var o=e[s](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){h(s,i,r,a,o,"next",e)}function o(e){h(s,i,r,a,o,"throw",e)}a(void 0)}))}}var m=new(function(){function e(){this.settings=d,this.page=1,this.query=""}var t=e.prototype;return t.fetchPopularFilms=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.tranding+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmsOnSearch=function(e,t){void 0===t&&(t=this.page);var n=""+this.settings.baseUrl+this.settings.names.search+"?api_key="+this.settings.key+"&language=en-US&query="+e+"&include_adult=false&page="+t;return fetch(n).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmById=function(e){var t=""+this.settings.baseUrl+this.settings.names.movie+e+"?api_key="+this.settings.key+"&language=en-US";return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchGenresList=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.genres+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},e}()),p=function(){function e(){this.refs=this.getGefs()}var t=e.prototype;return t.getGefs=function(){return{pageHeader:document.querySelector('[data-js="page-header"]'),movieGallery:document.querySelector('[data-js="movie-gallery"]'),pageFooter:document.querySelector('[data-js="page-footer"]')}},t.getCurrentPage=function(){var e=location.href;if(!e.includes("page="))return 1;var t=e.indexOf("page=")+String("page=").length;return e.slice(t)},t.init=function(){var e=g(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new i,n=new r,t.init(),n.init(),this.showPopularFilms(this.getCurrentPage()),t.refs.searcForm.addEventListener("click",this.onSearchBtnClick.bind(this)),this.refs.movieGallery.addEventListener("click",this.onMovieItemClick.bind(this));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.onSearchBtnClick=function(){var e=g(regeneratorRuntime.mark((function e(t){var n,i,r,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===t.target.nodeName||"svg"===t.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return n=t.currentTarget.elements.query.value,(i=t.currentTarget.querySelector(".search-form__error")).textContent="",e.prev=5,e.next=8,m.fetchFilmsOnSearch(n);case 8:return r=e.sent,e.next=11,m.fetchGenresList();case 11:if(s=e.sent,a=this.prepareDataForMarkup(r.results,s.genres),0!==r.results.length){e.next=15;break}throw error;case 15:(new o).render(a),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),i.textContent="Search result not successful. Enter the correct movie name and try again";case 22:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),t.onMovieItemClick=function(){var e=g(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UL"!==t.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.parentNode.dataset.id,console.log(n),e.prev=4,e.next=7,m.fetchFilmById(n);case 7:i=e.sent,(new c).renderMovieModal(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("error");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),t.onHomeBtnClick=function(e){},t.onMyLibraryBtnClick=function(e){},t.onWatchedBtnClick=function(e){},t.onQueueBtnClick=function(e){},t.showPopularFilms=function(){var e=g(regeneratorRuntime.mark((function e(t){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),e.prev=1,e.next=4,m.fetchPopularFilms(t);case 4:return n=e.sent,e.next=7,m.fetchGenresList();case 7:i=e.sent,r=this.prepareDataForMarkup(n.results,i.genres),(new o).render(r),(new l).create(this.getCurrentPage(),n.total_results),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("error");case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),t.prepareDataForMarkup=function(e,t){var n=null;return e.map((function(e){var i=e.genre_ids.reduce((function(e,i){return n=t.find((function(e){return e.id==i})),e.push(n.name),e}),[]);return e.genres=i.join(", "),e.year=e.release_date.slice(0,4),e}))},e}(),f=n("4AnZ"),v=n.n(f),b=n("fc4V"),y=n.n(b),I=n("LWga"),L=n.n(I),w=n("SzhR");n("VwVG"),n("ELjB");function k(e,t,n,i,r,s,a){try{var o=e[s](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){k(s,i,r,a,o,"next",e)}function o(e){k(s,i,r,a,o,"throw",e)}a(void 0)}))}}w.a.initializeApp({apiKey:"AIzaSyDckuyQARNfaPXRs7Jiz4Xgr28aczvsv5w",authDomain:"crazy-filmoteka.firebaseapp.com",projectId:"crazy-filmoteka",storageBucket:"crazy-filmoteka.appspot.com",messagingSenderId:"827169246677",appId:"1:827169246677:web:2524211488e4048eb1c15c"});var j=function(){function e(){this.auth=w.a.auth(),this.db=w.a.firestore()}var t=e.prototype;return t.getActualQueueLists=function(){var e=S(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:n=e.sent,i=n.data().queue,console.log(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getActualWatchedLists=function(){var e=S(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:n=e.sent,i=n.data().watched,console.log(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.addItemsToWattchedList=function(){var e=S(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:return n=e.sent,(i=n.data().watched).push({film:"scream"}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.addItemsToQueueList=function(){var e=S(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:return n=e.sent,(i=n.data().queue).push({film:"horse"}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.renewWatchedList=function(e){var t=this;document.querySelector(".watched").addEventListener("click",(function(n){n.preventDefault(),t.addItemsToWattchedList(e).then((function(n){t.db.collection("users").doc(e.uid).set({watched:n},{merge:!0})}))}))},t.renewQueueList=function(e){var t=this;document.querySelector(".queueBtn").addEventListener("click",(function(n){n.preventDefault(),t.addItemsToQueueList(e).then((function(n){t.db.collection("users").doc(e.uid).set({queue:n},{merge:!0})}))}))},e}(),D=function(){function e(){this.refs=this.getRefs(),this.auth=w.a.auth(),this.db=w.a.firestore()}var t=e.prototype;return t.getRefs=function(){return{signupForm:document.querySelector("#signup-form"),logout:document.querySelector("#logout"),loginForm:document.querySelector("#login-form"),loggedOutLink:document.querySelector(".logged-out"),loggedInLink:document.querySelector(".logged-in"),modalSignUp:document.querySelector("#modal-signup"),modalLogin:document.querySelector("#modal-login")}},t.signUp=function(e){var t=this;e.preventDefault();var n=this.refs.signupForm["signup-email"].value,i=this.refs.signupForm["signup-password"].value;this.auth.createUserWithEmailAndPassword(n,i).then((function(e){return t.db.collection("users").doc(e.user.uid).set({watched:[],queue:[]})})).then((function(){M.Modal.getInstance(t.refs.modalSignUp).close(),t.refs.signupForm.reset(),t.refs.signupForm.querySelector(".error").innerHTML=""})).catch((function(e){t.refs.signupForm.querySelector(".error").innerHTML=e.message}))},t.logout=function(e){e.preventDefault(),this.auth.signOut().then((function(){}))},t.login=function(e){var t=this;e.preventDefault();var n=this.refs.loginForm["login-email"].value,i=this.refs.loginForm["login-password"].value;this.auth.signInWithEmailAndPassword(n,i).then((function(){M.Modal.getInstance(t.refs.modalLogin).close(),t.refs.loginForm.reset(),t.refs.loginForm.querySelector(".error").innerHTML=""})).catch((function(e){t.refs.loginForm.querySelector(".error").innerHTML=e.message}))},t.setupUI=function(e){e?(this.refs.loggedInLink.classList.add("is-hidden"),this.refs.loggedOutLink.classList.remove("is-hidden")):(this.refs.loggedInLink.classList.remove("is-hidden"),this.refs.loggedOutLink.classList.add("is-hidden"))},t.init=function(){this.refs.signupForm.addEventListener("submit",this.signUp.bind(this)),this.refs.logout.addEventListener("click",this.logout.bind(this)),this.refs.loginForm.addEventListener("submit",this.login.bind(this))},e}();n("awo+");var C=document.querySelector("BODY");C.insertAdjacentHTML("afterbegin",v.a),C.insertAdjacentHTML("beforeend",y.a),C.insertAdjacentHTML("afterbegin",L.a);var Q=new p,A=new j,W=new D;Q.init(),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)})),document.querySelector('[data-target="modal-signup"]').addEventListener("click",(function(){var e=document.querySelector("#modal-login");M.Modal.getInstance(e).close()})),W.init(),A.auth.onAuthStateChanged((function(e){e?(W.setupUI(e),A.renewQueueList(e),A.renewWatchedList(e),A.getActualQueueLists(e),A.getActualWatchedLists(e)):W.setupUI()}))},fc4V:function(e,t,n){var i='<footer class="footer" data-js="page-footer"> <div class="container"> <p class="footer-description"> © 2021 | All Rights Reserved | <span>Developed with</span> <svg class="footer-description__icon" width="14px" height="14px" alt=""> <use href="'+n("vy/h")(n("4din"),{hash:"#love"})+'"></use> </svg> <span>by</span> <a class="footer-description__link" data-js="team-link"> <span>GoIT Students</span> </a> </p> </div> </footer> ';e.exports=i},yjly:function(e,t,n){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.1b255b938c53e9394950.js.map