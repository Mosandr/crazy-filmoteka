(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1OFI":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var i,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item modal-trigger" data-target="modal-card" data-id="'+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:o)===l?i.call(s,{name:"id",hash:{},data:r,loc:{start:{line:1,column:74},end:{line:1,column:80}}}):i)+'">\r\n    <div class="gallery__img-container" data-id="'+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:o)===l?i.call(s,{name:"id",hash:{},data:r,loc:{start:{line:2,column:49},end:{line:2,column:55}}}):i)+'">\r\n        <img class="gallery__img" src="https://image.tmdb.org/t/p/w500'+c(typeof(i=null!=(i=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?i:o)===l?i.call(s,{name:"poster_path",hash:{},data:r,loc:{start:{line:3,column:70},end:{line:3,column:86}}}):i)+'" alt="'+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:o)===l?i.call(s,{name:"title",hash:{},data:r,loc:{start:{line:3,column:93},end:{line:3,column:102}}}):i)+' movie poster">\r\n    </div>\r\n    <h3 class="gallery__movie-title">'+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:o)===l?i.call(s,{name:"title",hash:{},data:r,loc:{start:{line:5,column:37},end:{line:5,column:46}}}):i)+'</h3>\r\n    <p class="gallery__movie-genre">'+c(typeof(i=null!=(i=u(n,"genres")||(null!=t?u(t,"genres"):t))?i:o)===l?i.call(s,{name:"genres",hash:{},data:r,loc:{start:{line:6,column:36},end:{line:6,column:46}}}):i)+" | "+c(typeof(i=null!=(i=u(n,"year")||(null!=t?u(t,"year"):t))?i:o)===l?i.call(s,{name:"year",hash:{},data:r,loc:{start:{line:6,column:49},end:{line:6,column:57}}}):i)+'\r\n    </p>\r\n    <span class="gallery__movie-rating">'+c(typeof(i=null!=(i=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?i:o)===l?i.call(s,{name:"vote_average",hash:{},data:r,loc:{start:{line:8,column:40},end:{line:8,column:56}}}):i)+"</span>\r\n</li>"},useData:!0})},"1V9C":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var i,s,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item modal-trigger" data-target="modal-card" data-id="'+u(typeof(s=null!=(s=d(n,"id")||(null!=t?d(t,"id"):t))?s:l)===c?s.call(o,{name:"id",hash:{},data:r,loc:{start:{line:1,column:88},end:{line:1,column:94}}}):s)+'">\r\n    <img class="gallery__img" src="https://image.tmdb.org/t/p/w500'+u(typeof(s=null!=(s=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?s:l)===c?s.call(o,{name:"poster_path",hash:{},data:r,loc:{start:{line:2,column:66},end:{line:2,column:81}}}):s)+'" alt="'+u(typeof(s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:l)===c?s.call(o,{name:"title",hash:{},data:r,loc:{start:{line:2,column:88},end:{line:2,column:97}}}):s)+' movie poster">\r\n    <h3 class="gallery__movie-title">'+u(typeof(s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:l)===c?s.call(o,{name:"title",hash:{},data:r,loc:{start:{line:3,column:37},end:{line:3,column:46}}}):s)+'</h3>\r\n    <p class="gallery__movie-genre"><span class="card-genres">'+(null!=(i=d(n,"each").call(o,null!=t?d(t,"genres"):t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:62},end:{line:4,column:96}}}))?i:"")+'</span> |\r\n        <span class="year-of-release">'+u(typeof(s=null!=(s=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?s:l)===c?s.call(o,{name:"release_date",hash:{},data:r,loc:{start:{line:5,column:38},end:{line:5,column:54}}}):s)+'</span> <span\r\n            class="gallery__movie-rating">'+u(typeof(s=null!=(s=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?s:l)===c?s.call(o,{name:"vote_average",hash:{},data:r,loc:{start:{line:6,column:42},end:{line:6,column:58}}}):s)+"</span>\r\n    </p>\r\n</li>\r\n"},2:function(e,t,n,a,r){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(i=null!=(i=s(n,"name")||(null!=t?s(t,"name"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:4,column:78},end:{line:4,column:86}}}):i)+" "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:9,column:9}}}))?i:""},useData:!0})},"1yqS":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var i,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal__gallery__img-container"><img class="modal__gallery__img"\r\n    src="https://image.tmdb.org/t/p/w500'+l("function"==typeof(i=null!=(i=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?i:o)?i.call(s,{name:"poster_path",hash:{},data:r,loc:{start:{line:3,column:40},end:{line:3,column:55}}}):i)+'" alt="'+l("function"==typeof(i=null!=(i=c(n,"title")||(null!=t?c(t,"title"):t))?i:o)?i.call(s,{name:"title",hash:{},data:r,loc:{start:{line:3,column:62},end:{line:3,column:71}}}):i)+' movie poster"></div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:4,column:9}}}))?i:""},useData:!0})},"4AnZ":function(e,t,n){var a=n("vy/h"),r=n("4din"),i='<header data-js="page-header" class="page-header"> <div class="container"> <nav class="site-nav"> <a class="logo" href="./index.html"> <svg class="logo-svg" width="24px" height="24px" alt="logo"> <use href="'+a(r,{hash:"#logo"})+'"></use> </svg> <span class="logo-text">Filmoteka</span> </a> <div class="container-nav"> <ul class="site-nav-link list"> <li data-js="home-btn" class="item current"> <a href="./?home"><span>HOME</span> </a></li> <li data-js="lib-btn" class="item"> <a href="./?my-library"><span>MY LIBRARY</span> </a></li> </ul> <div id="auth" class="user-registration"> <p class="logged-out is-hidden"> <a href="#" class="" id="logout"> <i class="material-icons"> logout </i> </a> </p> <p class="logged-in is-hidden"> <a href="#" class="modal-trigger" data-target="modal-login"> <i class="material-icons"> perm_identity </i> </a> </p> </div> </div> </nav> <form data-js="search-form" class="search-form" id="search-form"> <label class="search-form-label"> <input class="search-form-input" type="text" name="query" autocomplete="off" placeholder="Поиск фильмов"/> <button type="submit" class="input-search-btn"> <svg class="input-search-svg" width="12px" height="12px" alt="input-search"> <use class="input-search-svg-icon" href="'+a(r,{hash:"#input-search"})+'"></use> </svg> </button> <p class="search-form__error"></p> </label> </form> <div class="header-button"> <button data-js="button-watch" class="button watch is-hidden is-active" type="button"> <span>WATCHED</span> </button> <button data-js="button-queue" class="button queue is-hidden" type="button"> <span>QUEUE</span> </button> </div> </div> </header> ';e.exports=i},"4din":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMCIgaGVpZ2h0PSIwIiBjbGFzcz0iaGlkZGVuIj4NCiAgPHN5bWJvbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNjcgNjciIGlkPSJhcnJvdy1yaWdodCI+DQogICAgPGltYWdlIHg9IjExIiB5PSIxMSIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjQ1IiB4bGluazpocmVmPSJkYXRhOmltZy9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDMEFBQUF0Q0FRQUFBQ1FFeW9SQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk5BQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFBQW1KTFIwUUFBS3FOSXpJQUFBQUpjRWhaY3dBQUxpTUFBQzRqQVhpbFAzWUFBQUFIZEVsTlJRZmxBZ3dTQXljcnpsMy9BQUFBcjBsRVFWUkl4KzNYdlEzQ01CQ0c0WmVrb2J5UzBpTXdndWxnUWtyUFFSVTJnQTNJQnNrR3BrRW9ndWFTM0FrSjNibHk0Y2ZXSi8vSW9DMmgwRkZJNmhIcWVsQ3BWQWIydG5CK3dUUHdac0UwUW1lNzh0dGszY2F4U09DQkJ4NzRuK0FiQVBKcXZDQ1Qvc2lCKy9lY05tMUFXczRjN2JKNTE1WmQ0L0ZDQTVBYWVpZTZoK1NWdGVzT1dWOXVoeWJnZ0FNTytLZXc0MThtejRlWGZPN01MdnJQUU5SUnRHcjZnakJ5NWFSOXFKOFJQRzN4ajRuNnVnQUFBQUJKUlU1RXJrSmdnZz09Ij48L2ltYWdlPg0KICA8L3N5bWJvbD4NCiAgPHN5bWJvbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiIgaWQ9ImlucHV0LXNlYXJjaCI+DQogICAgPHBhdGggZD0iTTUuNSA5LjVhNCA0IDAgMTAwLTggNCA0IDAgMDAwIDh6bTUgMUw4LjMyNSA4LjMyNSIgIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PC9wYXRoPg0KICA8L3N5bWJvbD4NCiAgPHN5bWJvbCBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgaWQ9ImxvZ28iPg0KICAgIDxwYXRoIGQ9Ik0xOS44MiAySDQuMThBMi4xOCAyLjE4IDAgMDAyIDQuMTh2MTUuNjRBMi4xOCAyLjE4IDAgMDA0LjE4IDIyaDE1LjY0QTIuMTggMi4xOCAwIDAwMjIgMTkuODJWNC4xOEEyLjE4IDIuMTggMCAwMDE5LjgyIDJ6TTcgMnYyME0xNyAydjIwTTIgMTJoMjBNMiA3aDVNMiAxN2g1bTEwIDBoNU0xNyA3aDUiIHN0cm9rZT0iIzgxODE4MSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjwvcGF0aD4NCiAgPC9zeW1ib2w+DQogIDxzeW1ib2wgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTQgMTMiIGlkPSJsb3ZlIj4NCiAgICA8cGF0aCBkPSJNNyAxMi44OGwtLjk4LS45OEMyLjM4IDguNjggMCA2LjUxIDAgMy44NSAwIDEuNjggMS42OCAwIDMuODUgMCA1LjA0IDAgNi4yMy41NiA3IDEuNDcgNy43Ny41NiA4Ljk2IDAgMTAuMTUgMCAxMi4zMiAwIDE0IDEuNjggMTQgMy44NWMwIDIuNjYtMi4zOCA0LjgzLTYuMDIgOC4wNWwtLjk4Ljk4eiIgZmlsbD0iI0ZGNkIwOCI+PC9wYXRoPg0KICA8L3N5bWJvbD4NCiAgPHN5bWJvbCBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgaWQ9ImFycm93LWxlZnQiPg0KICAgIDxwYXRoIGQ9Ik0xMi42NjcgOEgzLjMzM004IDEyLjY2N0wzLjMzMyA4IDggMy4zMzMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjMzMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48L3BhdGg+DQogIDwvc3ltYm9sPg0KPC9zdmc+"},EGS0:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var i,s,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal__film__card-information">\r\n  <div class="modal__film__card-text">\r\n    <h3 class="modal__gallery__movie-title">'+u(typeof(s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:l)===c?s.call(o,{name:"title",hash:{},data:r,loc:{start:{line:4,column:44},end:{line:4,column:53}}}):s)+'</h3>\r\n    <div class="modal__film__information-categories">\r\n      <ul class="modal__film__information-categories-keys">\r\n        <li class="modal__film__information-categories-key">Vote / Votes</li>\r\n        <li class="modal__film__information-categories-key">Popularity</li>\r\n        <li class="modal__film__information-categories-key">Original Title\r\n        </li>\r\n        <li class="modal__film__information-categories-key">Genre</li>\r\n      </ul>\r\n      <ul>\r\n        <li class="modal__film__inform-ctgr"><span class="modal__accent-oganre">'+u(typeof(s=null!=(s=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?s:l)===c?s.call(o,{name:"vote_average",hash:{},data:r,loc:{start:{line:14,column:80},end:{line:14,column:96}}}):s)+'</span> / <span\r\n            class="modal__accent-grey">'+u(typeof(s=null!=(s=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?s:l)===c?s.call(o,{name:"vote_count",hash:{},data:r,loc:{start:{line:15,column:39},end:{line:15,column:53}}}):s)+'</span> </li>\r\n        <li class="modal__film__inform-ctgr">'+u(typeof(s=null!=(s=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?s:l)===c?s.call(o,{name:"popularity",hash:{},data:r,loc:{start:{line:16,column:45},end:{line:16,column:59}}}):s)+'</li>\r\n        <li class="modal__film__inform-ctgr modal__film__inform-ctgr-upk">'+u(typeof(s=null!=(s=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?s:l)===c?s.call(o,{name:"original_title",hash:{},data:r,loc:{start:{line:17,column:74},end:{line:17,column:92}}}):s)+'</li>\r\n        <li class="modal__film__inform-ctgr genres-modal">'+(null!=(i=d(n,"each").call(o,null!=t?d(t,"genres"):t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:18,column:58},end:{line:18,column:92}}}))?i:"")+'</li>\r\n      </ul>\r\n    </div>\r\n\r\n    <h4 class="modal__gallery__movie-about">ABOUT</h4>\r\n    <p class="modal__gallery__movie-text">'+u(typeof(s=null!=(s=d(n,"overview")||(null!=t?d(t,"overview"):t))?s:l)===c?s.call(o,{name:"overview",hash:{},data:r,loc:{start:{line:23,column:42},end:{line:23,column:54}}}):s)+"</p>\r\n  </div>\r\n"},2:function(e,t,n,a,r){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(i=null!=(i=s(n,"name")||(null!=t?s(t,"name"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:18,column:74},end:{line:18,column:82}}}):i)+" "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:25,column:11}}}))?i:""},useData:!0})},QfWi:function(e,t,n){"use strict";n.r(t);n("yjly");var a=n("4AnZ"),r=n.n(a),i=n("fc4V"),s=n.n(i),o=n("X39H"),l=n.n(o),c=(n("IlJM"),n("IvQZ"),n("uQK7"),n("8cZI"),n("lmye"),n("x3Br"),n("WB5j"),n("lAJ5"),n("D/wG"),n("JBxO"),n("FdtR"),n("Muwe"),n("4NM0"),n("X5mX"),n("aZFp"),n("SgDD"),n("wcNg"),function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{linkHome:document.querySelector('[data-js="home-btn"]'),linkLib:document.querySelector('[data-js="lib-btn"]'),searcForm:document.querySelector('[data-js="search-form"]'),buttonWatch:document.querySelector('[data-js="button-watch"]'),buttonQueue:document.querySelector('[data-js="button-queue"]'),headerBackground:document.querySelector('[data-js="page-header"]')}},t.init=function(){this.refs.linkHome.addEventListener("click",this.onHomeLinkClick.bind(this)),this.refs.linkLib.addEventListener("click",this.onMyLibraryLinkClick.bind(this))},t.onMyLibraryLinkClick=function(e){this.refs.linkHome.classList.remove("current"),this.refs.linkLib.classList.add("current"),this.refs.searcForm.classList.add("is-hidden"),this.refs.buttonQueue.classList.remove("is-hidden"),this.refs.buttonWatch.classList.remove("is-hidden"),this.refs.headerBackground.classList.add("lib"),this.initLibraryButtons(),this.onWatchedClick()},t.onHomeLinkClick=function(e){this.refs.linkHome.classList.add("current"),this.refs.linkLib.classList.remove("current"),this.refs.searcForm.classList.remove("is-hidden"),this.refs.buttonQueue.classList.add("is-hidden"),this.refs.buttonWatch.classList.add("is-hidden"),this.refs.headerBackground.classList.remove("lib"),this.disabelLibraryButtons()},t.initLibraryButtons=function(){this.refs.buttonWatch.addEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonQueue.addEventListener("click",this.onQueueClick.bind(this))},t.onWatchedClick=function(){this.refs.buttonWatch.classList.add("is-active"),this.refs.buttonQueue.classList.remove("is-active")},t.onQueueClick=function(){this.refs.buttonQueue.classList.add("is-active"),this.refs.buttonWatch.classList.remove("is-active")},t.disabelLibraryButtons=function(){this.refs.buttonQueue.removeEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonWatch.removeEventListener("click",this.onQueueClick.bind(this))},e}()),u=(n("eV24"),function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{teamLink:document.querySelector('[data-js="team-link"]')}},t.init=function(){this.refs.teamLink.addEventListener("click",this.onTeamLinkClick.bind(this))},t.onTeamLinkClick=function(e){console.log("Now team modal must be open")},e}()),d=n("1OFI"),m=n.n(d),h=function(){function e(){this.galleryRef=document.querySelector('[data-js="movie-gallery"]')}return e.prototype.render=function(e){var t=e.reduce((function(e,t){return e+m()(t)}),"");this.galleryRef.insertAdjacentHTML("afterbegin",t)},e}();n("awo+");var p=n("EGS0"),f=n.n(p),g=n("1yqS"),v=n.n(g),y=function(){function e(){this.modalInsert=document.querySelector(".card-data-insert"),this.modalInsertImg=document.querySelector(".description-insert"),this.closeBtn=document.querySelector(".data__modal__film-close-btn"),this.modal=document.querySelector("#modal-card"),this.teamLink=document.querySelector('[data-js="team-link"]'),this.teamCloseBtn=document.querySelector(".team-close-btn"),this.modalTeam=document.querySelector("#modal-team")}var t=e.prototype;return t.render=function(e){this.clear();var t=[];t.push(e);var n=v()(t);this.modalInsert.insertAdjacentHTML("afterbegin",n)},t.renderPhoto=function(e){this.modalInsertImg.innerHTML="";var t=[];t.push(e);var n=f()(t);this.modalInsertImg.insertAdjacentHTML("afterbegin",n)},t.clear=function(){this.modalInsert.innerHTML=""},t.closeByCross=function(){M.Modal.getInstance(this.modal).close()},t.init=function(){this.closeBtn.addEventListener("click",this.closeByCross.bind(this))},t.modalTeamCross=function(){var e=this;this.teamCloseBtn.addEventListener("click",(function(){M.Modal.getInstance(e.modalTeam).close()}))},e}(),b=(n("RtS0"),n("Xlt+"),n("3dw1"),n("1V9C")),_=n.n(b),w=n("SzhR");n("VwVG"),n("ELjB");function L(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){L(i,a,r,s,o,"next",e)}function o(e){L(i,a,r,s,o,"throw",e)}s(void 0)}))}}w.a.initializeApp({apiKey:"AIzaSyDckuyQARNfaPXRs7Jiz4Xgr28aczvsv5w",authDomain:"crazy-filmoteka.firebaseapp.com",projectId:"crazy-filmoteka",storageBucket:"crazy-filmoteka.appspot.com",messagingSenderId:"827169246677",appId:"1:827169246677:web:2524211488e4048eb1c15c"});var I=function(){function e(){this.auth=w.a.auth(),this.db=w.a.firestore(),this.watchBtn=document.querySelector(".data__modal__film-add-to-watched"),this.queueBtn=document.querySelector(".data__modal__film-add-to-queue"),this.watchBtnHeader=document.querySelector(".watch"),this.queueBtnHeader=document.querySelector(".queue"),this.galleryListRef=document.querySelector('[data-js="movie-gallery"]'),this.libraryBtn=document.querySelector('[data-js="lib-btn"]')}var t=e.prototype;return t.getActualQueueLists=function(){var e=k(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:n=e.sent,a=n.data().queue,this.queueBtnHeader.addEventListener("click",this.renderGalleryOnBtnClick.bind(this,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getActualWatchedLists=function(){var e=k(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:n=e.sent,a=n.data().watched,this.renderGalleryOnBtnClick(a),this.watchBtnHeader.addEventListener("click",this.renderGalleryOnBtnClick.bind(this,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.renderGalleryOnBtnClick=function(e){this.galleryListRef.innerHTML="",this.galleryListRef.insertAdjacentHTML("afterbegin",_()(e)),document.querySelectorAll(".card-genres").forEach((function(e){e.textContent=e.textContent.trim().split(" ").join(", ")})),document.querySelectorAll(".year-of-release").forEach((function(e){e.textContent=e.textContent.trim().split("").splice(0,4).join("")}))},t.addItemsToWattchedList=function(){var e=k(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.collection("users").doc(t.uid).get();case 3:if(n=e.sent,a=n.data().watched,r=JSON.parse(this.watchBtn.dataset.ob),!a.some((function(e){return e.id===r.id}))){e.next=10;break}return e.abrupt("return",a);case 10:return a.push(r),this.watchBtn.disabled=!0,this.watchBtn.classList.add("disabled"),this.watchBtn.textContent="ADDED TO WATCHED",e.abrupt("return",a);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),t.addItemsToQueueList=function(){var e=k(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:if(n=e.sent,a=n.data().queue,r=JSON.parse(this.queueBtn.dataset.ob),!a.some((function(e){return e.id===r.id}))){e.next=9;break}return e.abrupt("return",a);case 9:return a.push(r),this.queueBtn.disabled=!0,this.queueBtn.classList.add("disabled"),this.queueBtn.textContent="ADDED TO QUEUE",e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.renewWatchedList=function(e){this.watchBtn.addEventListener("click",this.handleWatchBtnClick.bind(this,e))},t.handleWatchBtnClick=function(e){var t=this;this.addItemsToWattchedList(e).then((function(n){t.db.collection("users").doc(e.uid).set({watched:n},{merge:!0})}))},t.renewQueueList=function(e){this.queueBtn.addEventListener("click",this.handleQueueBtnClick.bind(this,e))},t.handleQueueBtnClick=function(e){var t=this;this.addItemsToQueueList(e).then((function(n){t.db.collection("users").doc(e.uid).set({queue:n},{merge:!0})}))},t.loginMessage=function(e){var t=document.querySelector(".login-message");t.textContent=e?"":"Please Login to see your library"},t.dataForQueuePagination=function(){var e=k(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:if(a=e.sent,r=a.data().queue,i=r.length,(s={}).num=i,0!==Math.floor((i-1)/20)){e.next=12;break}return s.films=r,e.abrupt("return",s);case 12:return o=20*(n-1),l=r.splice(o,20),s.films=l,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.dataForWatchedPagination=function(){var e=k(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("users").doc(t.uid).get();case 2:if(a=e.sent,r=a.data().watched,i=r.length,(s={}).num=i,0!==Math.floor((i-1)/20)){e.next=12;break}return s.films=r,e.abrupt("return",s);case 12:return o=20*(n-1),l=r.splice(o,20),s.films=l,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}(),x=function(){function e(){this.refs=this.getRefs(),this.auth=w.a.auth(),this.db=w.a.firestore()}var t=e.prototype;return t.getRefs=function(){return{signupForm:document.querySelector("#signup-form"),logout:document.querySelector("#logout"),loginForm:document.querySelector("#login-form"),loggedOutLink:document.querySelector(".logged-out"),loggedInLink:document.querySelector(".logged-in"),modalSignUp:document.querySelector("#modal-signup"),modalLogin:document.querySelector("#modal-login")}},t.signUp=function(e){var t=this;e.preventDefault();var n=this.refs.signupForm["signup-email"].value,a=this.refs.signupForm["signup-password"].value;this.auth.createUserWithEmailAndPassword(n,a).then((function(e){return t.db.collection("users").doc(e.user.uid).set({watched:[],queue:[]})})).then((function(){M.Modal.getInstance(t.refs.modalSignUp).close(),t.refs.signupForm.reset(),t.refs.signupForm.querySelector(".error").innerHTML=""})).catch((function(e){t.refs.signupForm.querySelector(".error").innerHTML=e.message}))},t.logout=function(e){e.preventDefault(),this.auth.signOut().then((function(){}))},t.login=function(e){var t=this;e.preventDefault();var n=this.refs.loginForm["login-email"].value,a=this.refs.loginForm["login-password"].value;this.auth.signInWithEmailAndPassword(n,a).then((function(){M.Modal.getInstance(t.refs.modalLogin).close(),t.refs.loginForm.reset(),t.refs.loginForm.querySelector(".error").innerHTML=""})).catch((function(e){t.refs.loginForm.querySelector(".error").innerHTML=e.message}))},t.setupUI=function(e){e?(this.refs.loggedInLink.classList.add("is-hidden"),this.refs.loggedOutLink.classList.remove("is-hidden")):(this.refs.loggedInLink.classList.remove("is-hidden"),this.refs.loggedOutLink.classList.add("is-hidden"))},t.init=function(){this.refs.signupForm.addEventListener("submit",this.signUp.bind(this)),this.refs.logout.addEventListener("click",this.logout.bind(this)),this.refs.loginForm.addEventListener("submit",this.login.bind(this))},e}(),C=n("Np6Y"),B=function(){function e(){}return e.prototype.create=function(e,t,n){void 0===e&&(e=1);var a=new C.TemplatePaginator({prelink:"./?"+n,current:e,rowsPerPage:20,totalResult:t,slashSeparator:!1,template:document.getElementById("pagination-template").innerHTML}).render();document.getElementById("movie-pagination").innerHTML=a},e}(),S={key:"62af7111fb0063930df9c7b53547034d",baseUrl:"https://api.themoviedb.org/3",names:{tranding:"/trending/movie/week",search:"/search/movie",movie:"/movie/",genres:"/genre/movie/list"}},j=function(){function e(){this.settings=S,this.page=1,this.query=""}var t=e.prototype;return t.fetchPopularFilms=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.tranding+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmsOnSearch=function(e,t){void 0===t&&(t=this.page);var n=""+this.settings.baseUrl+this.settings.names.search+"?api_key="+this.settings.key+"&language=en-US&query="+e+"&include_adult=false&page="+t;return fetch(n).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmById=function(e){var t=""+this.settings.baseUrl+this.settings.names.movie+e+"?api_key="+this.settings.key+"&language=en-US";return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchGenresList=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.genres+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},e}();function A(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){A(i,a,r,s,o,"next",e)}function o(e){A(i,a,r,s,o,"throw",e)}s(void 0)}))}}var q=new I,Q=new j,W=function(){function e(){this.refs=this.getGefs()}var t=e.prototype;return t.getGefs=function(){return{pageHeader:document.querySelector('[data-js="page-header"]'),movieGallery:document.querySelector('[data-js="movie-gallery"]'),pageFooter:document.querySelector('[data-js="page-footer"]'),watchBtn:document.querySelector(".data__modal__film-add-to-watched"),queueBtn:document.querySelector(".data__modal__film-add-to-queue"),homeBtn:document.querySelector('[data-js="home-btn"]')}},t.getCurrentPage=function(){var e=location.href;if(!e.includes("page="))return 1;var t=e.indexOf("page=")+String("page=").length;return e.slice(t)},t.isMyLibraryPageOpen=function(){return!!location.href.includes("my-library")},t.isSearchSubmited=function(){return!!location.href.includes("query")},t.onSearchSubmit=function(e){""===e.currentTarget.query.value.trim()&&(e.preventDefault(),e.currentTarget.querySelector(".search-form__error").textContent="Search query was empty. Enter the movie name and try again")},t.init=function(){var e=D(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new c,n=new u,document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)})),document.querySelector('[data-target="modal-signup"]').addEventListener("click",(function(){var e=document.querySelector("#modal-login");M.Modal.getInstance(e).close()})),t.init(),n.init(),this.refs.homeBtn.addEventListener("click",this.showPopularFilms.bind(this,1)),this.refs.movieGallery.addEventListener("click",this.onMovieItemClick.bind(this)),this.refs.pageHeader.querySelector(".search-form").addEventListener("submit",this.onSearchSubmit),!this.isMyLibraryPageOpen()){e.next=11;break}return t.onMyLibraryLinkClick(),e.abrupt("return");case 11:if(!this.isSearchSubmited()){e.next=16;break}return a=location.search.slice(7).split("&")[0],r=this.getCurrentPage(),this.showSearchFilms(a,r),e.abrupt("return");case 16:this.showPopularFilms(this.getCurrentPage());case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.onMovieItemClick=function(){var e=D(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UL"!==t.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.parentNode.dataset.id,this.refs.watchBtn.dataset.id=n,this.refs.queueBtn.dataset.id=n,e.prev=5,e.next=8,Q.fetchFilmById(n);case 8:a=e.sent,this.refs.watchBtn.dataset.ob=JSON.stringify(a),this.refs.queueBtn.dataset.ob=JSON.stringify(a),(r=new y).renderPhoto(a),r.render(a),(i=document.querySelector(".genres-modal")).textContent=i.textContent.trim().split(" ").join(", "),r.init(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),console.log(e.t0);case 22:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),t.showPopularFilms=function(){var e=D(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),e.prev=1,e.next=4,Q.fetchPopularFilms(t);case 4:return n=e.sent,e.next=7,Q.fetchGenresList();case 7:a=e.sent,r=this.prepareDataForMarkup(n.results,a.genres),(new h).render(r),(new B).create(this.getCurrentPage(),n.total_results,"home"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("error");case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),t.showSearchFilms=function(){var e=D(regeneratorRuntime.mark((function e(t,n){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=1),e.prev=1,e.next=4,Q.fetchFilmsOnSearch(t,n);case 4:return a=e.sent,e.next=7,Q.fetchGenresList();case 7:if(r=e.sent,!(!a.total_results>0)){e.next=10;break}throw error;case 10:i=this.prepareDataForMarkup(a.results,r.genres),(new h).render(i),a.total_results/20>1&&(new B).create(this.getCurrentPage(),a.total_results,"query="+t),this.refs.pageHeader.querySelector(".search-form-input").value=t,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),this.refs.pageHeader.querySelector(".search-form__error").textContent="Search result not successful. Enter the correct movie name and try again";case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}(),t.prepareDataForMarkup=function(e,t){var n=null;return e.map((function(e){var a=e.genre_ids.reduce((function(e,a){return n=t.find((function(e){return e.id==a})),e.push(n.name),e}),[]);return e.genres=a.join(", "),e.year=e.release_date?e.release_date.slice(0,4):"",e}))},t.btnDisabledChange=function(){var e=this;q.auth.onAuthStateChanged((function(t){t?e.refs.movieGallery.addEventListener("click",function(){var n=D(regeneratorRuntime.mark((function n(a){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("UL"!==a.target.nodeName){n.next=2;break}return n.abrupt("return");case 2:return r=a.target.parentNode.dataset.id,n.next=5,q.db.collection("users").doc(t.uid).get();case 5:i=n.sent,i.data().watched.map((function(e){return e.id})).some((function(e){return e===+r}))?(e.refs.watchBtn.disabled=!0,e.refs.watchBtn.classList.add("disabled"),e.refs.watchBtn.textContent="ADDED TO WATCHED"):(e.refs.watchBtn.disabled=!1,e.refs.watchBtn.classList.remove("disabled"),e.refs.watchBtn.textContent="ADD TO WATCHED"),i.data().queue.map((function(e){return e.id})).some((function(e){return e===+r}))?(e.refs.queueBtn.disabled=!0,e.refs.queueBtn.classList.add("disabled"),e.refs.queueBtn.textContent="ADDED TO QUEUE"):(e.refs.queueBtn.disabled=!1,e.refs.queueBtn.classList.remove("disabled"),e.refs.queueBtn.textContent="ADD TO QUEUE");case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()):(e.refs.queueBtn.disabled=!0,e.refs.queueBtn.classList.add("disabled"),e.refs.queueBtn.textContent="Login to add to queue",e.refs.watchBtn.disabled=!0,e.refs.watchBtn.classList.add("disabled"),e.refs.watchBtn.textContent="Login to add to watched")}))},e}(),N=document.querySelector("BODY"),T=document.querySelector("MAIN");N.insertAdjacentHTML("afterbegin",l.a),N.insertAdjacentHTML("afterbegin",r.a),T.insertAdjacentHTML("afterend",s.a);var U=new W,E=new I,F=new x;U.init(),U.btnDisabledChange(),F.init(),E.auth.onAuthStateChanged((function(e){e?(F.setupUI(e),E.renewQueueList(e),E.renewWatchedList(e),E.getActualQueueLists(e),E.loginMessage(e),U.isMyLibraryPageOpen()&&(E.getActualWatchedLists(e),E.dataForQueuePagination(e,2),E.dataForWatchedPagination(e,2))):(F.setupUI(),U.isMyLibraryPageOpen()&&E.loginMessage())}))},X39H:function(e,t){e.exports=' <div id="modal-signup" class="modal"> <div class="modal-content"> <h4 class="modal-content-title">Sign up</h4> <br/> <form id="signup-form"> <div class="input-field"> <input class="input-field-data" type="email" id="signup-email" required/> <label class="input-field-label" for="signup-email">Email address</label> </div> <div class="input-field"> <input class="input-field-data" type="password" id="signup-password" required/> <label class="input-field-label" for="signup-password">Choose password</label> </div> <button class="registration-btn">Sign up</button> <p class="error pink-text center-align"></p> </form> </div> </div> <div id="modal-login" class="modal"> <div class="modal-content"> <h4 class="modal-content-title">Login</h4> <br/> <form id="login-form"> <div class="input-field"> <input class="input-field-data" type="email" id="login-email" required/> <label class="input-field-label" for="login-email">Email address</label> </div> <div class="input-field"> <input class="input-field-data" type="password" id="login-password" required/> <label class="input-field-label" for="login-password">Your password</label> </div> <button class="registration-btn">Login</button> <p class="modal-signup-question"> New user? <a href="#" class="modal-trigger" data-target="modal-signup"> Sign up </a> </p> <p class="error pink-text center-align"></p> </form> </div> </div> <div id="modal-card" class="data__modal__film modal"> <div class="modal__film__card"> <div class="modal__film-close-btn-container"> <button type="button" class="data__modal__film-close-btn"> &#10005; </button> </div> <div class="modal__film__card-content"> <div class="card-data-insert"></div> <div class="modal__btns__down"> <div class="description-insert"></div> <button type="button" class="data__modal__film-add-to-watched"> ADD TO WATCHED </button> <button type="button" class="data__modal__film-add-to-queue"> ADD TO QUEUE </button> </div> </div> </div> </div> '},eV24:function(e,t){},fc4V:function(e,t,n){var a='<footer class="footer" data-js="page-footer"> <div class="container"> <p class="footer-description"> © 2021 | All Rights Reserved | <span>Developed with</span> <svg class="footer-description__icon" width="14px" height="14px" alt=""> <use href="'+n("vy/h")(n("4din"),{hash:"#love"})+'"></use> </svg> <span>by</span> <a class="footer-description__link" data-target="modal-team" data-js="team-link"> <span>GoIT Students</span> </a> </p> </div> </footer> ';e.exports=a},yjly:function(e,t,n){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.9783e5cf94268bca4f98.js.map