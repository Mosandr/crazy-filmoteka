(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1OFI":function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",u=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item" data-id="'+u(typeof(a=null!=(a=l(n,"id")||(null!=t?l(t,"id"):t))?a:o)===c?a.call(s,{name:"id",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:41}}}):a)+'">\r\n    <img class="gallery__img" src="https://image.tmdb.org/t/p/w500'+u(typeof(a=null!=(a=l(n,"poster_path")||(null!=t?l(t,"poster_path"):t))?a:o)===c?a.call(s,{name:"poster_path",hash:{},data:i,loc:{start:{line:2,column:66},end:{line:2,column:81}}}):a)+'" alt="'+u(typeof(a=null!=(a=l(n,"title")||(null!=t?l(t,"title"):t))?a:o)===c?a.call(s,{name:"title",hash:{},data:i,loc:{start:{line:2,column:88},end:{line:2,column:97}}}):a)+' movie poster">\r\n    <h3 class="gallery__movie-title">'+u(typeof(a=null!=(a=l(n,"title")||(null!=t?l(t,"title"):t))?a:o)===c?a.call(s,{name:"title",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:46}}}):a)+'</h3>\r\n    <p class="gallery__movie-genre">'+u(typeof(a=null!=(a=l(n,"genres")||(null!=t?l(t,"genres"):t))?a:o)===c?a.call(s,{name:"genres",hash:{},data:i,loc:{start:{line:4,column:36},end:{line:4,column:46}}}):a)+" | "+u(typeof(a=null!=(a=l(n,"year")||(null!=t?l(t,"year"):t))?a:o)===c?a.call(s,{name:"year",hash:{},data:i,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):a)+"</p>\r\n</li>"},useData:!0})},"4AnZ":function(e,t,n){var r=n("vy/h"),i=n("4din"),a='<header data-js="page-header" class="page-header"> <div class="container"> <nav class="site-nav"> <a class="logo" href="./index.html"> <svg class="logo-svg" width="24px" height="24px" alt="logo"> <use href="'+r(i,{hash:"#logo"})+'"></use> </svg> <span class="logo-text">Filmoteka</span> </a> <ul class="site-nav-link list"> <li data-js="home-btn" class="item current"> <a><span>HOME</span> </a></li> <li data-js="lib-btn" class="item"> <a><span>MY LIBRARY</span> </a></li> </ul> </nav> <div id="auth" class=""> <p class="logged-out is-hidden"> <a href="#" class="" id="logout"> <i class="material-icons"> logout </i> </a> </p> <p class="logged-in is-hidden"> <a href="#" class="modal-trigger" data-target="modal-login"> <i class="material-icons"> perm_identity </i> </a> </p> </div> <form data-js="search-form" class="search-form" id="search-form"> <input class="search-form-input" type="text" name="query" autocomplete="off" placeholder="Поиск фильмов"/> <button type="button"> <svg class="input-search-svg" width="10px" height="10px" alt="input-search"> <use href="'+r(i,{hash:"#input-search"})+'"></use> </svg> </button> <p class="search-form__error"></p> </form> <div class="header-button"> <button data-js="button-watch" class="button watch is-hidden is-active" type="button"> <span>WATCHED</span> </button> <button data-js="button-queue" class="button queue is-hidden" type="button"> <span>QUEUE</span> </button> </div> </div> </header> ';e.exports=a},"4din":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMCIgaGVpZ2h0PSIwIiBjbGFzcz0iaGlkZGVuIj4NCiAgPHN5bWJvbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNjcgNjciIGlkPSJhcnJvdy1yaWdodCI+DQogICAgPGltYWdlIHg9IjExIiB5PSIxMSIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjQ1IiB4bGluazpocmVmPSJkYXRhOmltZy9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDMEFBQUF0Q0FRQUFBQ1FFeW9SQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk5BQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFBQW1KTFIwUUFBS3FOSXpJQUFBQUpjRWhaY3dBQUxpTUFBQzRqQVhpbFAzWUFBQUFIZEVsTlJRZmxBZ3dTQXljcnpsMy9BQUFBcjBsRVFWUkl4KzNYdlEzQ01CQ0c0WmVrb2J5UzBpTXdndWxnUWtyUFFSVTJnQTNJQnNrR3BrRW9ndWFTM0FrSjNibHk0Y2ZXSi8vSW9DMmgwRkZJNmhIcWVsQ3BWQWIydG5CK3dUUHdac0UwUW1lNzh0dGszY2F4U09DQkJ4NzRuK0FiQVBKcXZDQ1Qvc2lCKy9lY05tMUFXczRjN2JKNTE1WmQ0L0ZDQTVBYWVpZTZoK1NWdGVzT1dWOXVoeWJnZ0FNTytLZXc0MThtejRlWGZPN01MdnJQUU5SUnRHcjZnakJ5NWFSOXFKOFJQRzN4ajRuNnVnQUFBQUJKUlU1RXJrSmdnZz09Ij48L2ltYWdlPg0KICA8L3N5bWJvbD4NCiAgPHN5bWJvbCBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiIgaWQ9ImlucHV0LXNlYXJjaCI+DQogICAgPHBhdGggZD0iTTUuNSA5LjVhNCA0IDAgMTAwLTggNCA0IDAgMDAwIDh6bTUgMUw4LjMyNSA4LjMyNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjwvcGF0aD4NCiAgPC9zeW1ib2w+DQogIDxzeW1ib2wgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGlkPSJsb2dvIj4NCiAgICA8cGF0aCBkPSJNMTkuODIgMkg0LjE4QTIuMTggMi4xOCAwIDAwMiA0LjE4djE1LjY0QTIuMTggMi4xOCAwIDAwNC4xOCAyMmgxNS42NEEyLjE4IDIuMTggMCAwMDIyIDE5LjgyVjQuMThBMi4xOCAyLjE4IDAgMDAxOS44MiAyek03IDJ2MjBNMTcgMnYyME0yIDEyaDIwTTIgN2g1TTIgMTdoNW0xMCAwaDVNMTcgN2g1IiBzdHJva2U9IiM4MTgxODEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48L3BhdGg+DQogIDwvc3ltYm9sPg0KICA8c3ltYm9sIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE0IDEzIiBpZD0ibG92ZSI+DQogICAgPHBhdGggZD0iTTcgMTIuODhsLS45OC0uOThDMi4zOCA4LjY4IDAgNi41MSAwIDMuODUgMCAxLjY4IDEuNjggMCAzLjg1IDAgNS4wNCAwIDYuMjMuNTYgNyAxLjQ3IDcuNzcuNTYgOC45NiAwIDEwLjE1IDAgMTIuMzIgMCAxNCAxLjY4IDE0IDMuODVjMCAyLjY2LTIuMzggNC44My02LjAyIDguMDVsLS45OC45OHoiIGZpbGw9IiNGRjZCMDgiPjwvcGF0aD4NCiAgPC9zeW1ib2w+DQogIDxzeW1ib2wgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiIGlkPSJhcnJvdy1sZWZ0Ij4NCiAgICA8cGF0aCBkPSJNMTIuNjY3IDhIMy4zMzNNOCAxMi42NjdMMy4zMzMgOCA4IDMuMzMzIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4zMzMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PC9wYXRoPg0KICA8L3N5bWJvbD4NCjwvc3ZnPg=="},LWga:function(e,t){e.exports=' <div id="modal-signup" class="modal"> <div class="modal-content"> <h4>Sign up</h4> <br/> <form id="signup-form"> <div class="input-field"> <input type="email" id="signup-email" required/> <label for="signup-email">Email address</label> </div> <div class="input-field"> <input type="password" id="signup-password" required/> <label for="signup-password">Choose password</label> </div> <button class="btn darken-2 z-depth-0">Sign up</button> <p class="error pink-text center-align"></p> </form> </div> </div> <div id="modal-login" class="modal"> <div class="modal-content"> <h4>Login</h4> <br/> <form id="login-form"> <div class="input-field"> <input type="email" id="login-email" required/> <label for="login-email">Email address</label> </div> <div class="input-field"> <input type="password" id="login-password" required/> <label for="login-password">Your password</label> </div> <button class="btn darken-2 z-depth-0">Login</button> <p> New user? <a href="#" class="grey-text modal-trigger" data-target="modal-signup"> Sign up </a> </p> <p class="error pink-text center-align"></p> </form> </div> </div> '},QfWi:function(e,t,n){"use strict";n.r(t);n("yjly"),n("IlJM"),n("8cZI"),n("lmye"),n("x3Br"),n("WB5j"),n("D/wG"),n("JBxO"),n("FdtR"),n("wcNg");var r=function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{linkHome:document.querySelector('[data-js="home-btn"]'),linkLib:document.querySelector('[data-js="lib-btn"]'),searcForm:document.querySelector('[data-js="search-form"]'),buttonWatch:document.querySelector('[data-js="button-watch"]'),buttonQueue:document.querySelector('[data-js="button-queue"]'),headerBackground:document.querySelector('[data-js="page-header"]')}},t.init=function(){this.refs.linkHome.addEventListener("click",this.onHomeLinkClick.bind(this)),this.refs.linkLib.addEventListener("click",this.onMyLibraryLinkClick.bind(this))},t.onMyLibraryLinkClick=function(e){this.refs.linkHome.classList.remove("current"),this.refs.linkLib.classList.add("current"),this.refs.searcForm.classList.add("is-hidden"),this.refs.buttonQueue.classList.remove("is-hidden"),this.refs.buttonWatch.classList.remove("is-hidden"),this.refs.headerBackground.classList.add("lib"),this.initLibraryButtons(),this.onWatchedClick()},t.onHomeLinkClick=function(e){this.refs.linkHome.classList.add("current"),this.refs.linkLib.classList.remove("current"),this.refs.searcForm.classList.remove("is-hidden"),this.refs.buttonQueue.classList.add("is-hidden"),this.refs.buttonWatch.classList.add("is-hidden"),this.refs.headerBackground.classList.remove("lib"),this.disabelLibraryButtons()},t.initLibraryButtons=function(){this.refs.buttonWatch.addEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonQueue.addEventListener("click",this.onQueueClick.bind(this))},t.onWatchedClick=function(){this.refs.buttonWatch.classList.add("is-active"),this.refs.buttonQueue.classList.remove("is-active")},t.onQueueClick=function(){this.refs.buttonQueue.classList.add("is-active"),this.refs.buttonWatch.classList.remove("is-active")},t.disabelLibraryButtons=function(){this.refs.buttonQueue.removeEventListener("click",this.onWatchedClick.bind(this)),this.refs.buttonWatch.removeEventListener("click",this.onQueueClick.bind(this))},e}(),i=function(){function e(){this.refs=this.getRefs()}var t=e.prototype;return t.getRefs=function(){return{teamLink:document.querySelector('[data-js="team-link"]')}},t.init=function(){this.refs.teamLink.addEventListener("click",this.onTeamLinkClick.bind(this))},t.onTeamLinkClick=function(e){console.log("Now team modal must be open")},e}(),a=n("1OFI"),s=n.n(a),o=function(){function e(){this.galleryRef=document.querySelector('[data-js="movie-gallery"]')}var t=e.prototype;return t.render=function(e){this.clear();var t=e.reduce((function(e,t){return e+s()(t)}),"");this.galleryRef.insertAdjacentHTML("afterbegin",t)},t.clear=function(){this.galleryRef.innerHTML=""},e}(),c=(n("Muwe"),n("X5mX"),{key:"62af7111fb0063930df9c7b53547034d",baseUrl:"https://api.themoviedb.org/3",names:{tranding:"/trending/movie/week",search:"/search/movie",movie:"/movie/",genres:"/genre/movie/list"}});function u(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){u(a,r,i,s,o,"next",e)}function o(e){u(a,r,i,s,o,"throw",e)}s(void 0)}))}}var d=new(function(){function e(){this.settings=c,this.page=1,this.query=""}var t=e.prototype;return t.fetchPopularFilms=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.tranding+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmsOnSearch=function(e,t){void 0===t&&(t=this.page);var n=""+this.settings.baseUrl+this.settings.names.search+"?api_key="+this.settings.key+"&language=en-US&query="+e+"&include_adult=false&page="+t;return fetch(n).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchFilmById=function(e){var t=""+this.settings.baseUrl+this.settings.names.movie+e+"?api_key="+this.settings.key+"&language=en-US";return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},t.fetchGenresList=function(e){void 0===e&&(e=this.page);var t=""+this.settings.baseUrl+this.settings.names.genres+"?api_key="+this.settings.key+"&page="+e;return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))},e}()),h=function(){function e(){this.refs=this.getGefs()}var t=e.prototype;return t.getGefs=function(){return{pageHeader:document.querySelector('[data-js="page-header"]'),movieGallery:document.querySelector('[data-js="movie-gallery"]'),pageFooter:document.querySelector('[data-js="page-footer"]')}},t.init=function(){var e=new r,t=new i;e.init(),t.init(),this.showPopularFilms(),e.refs.searcForm.addEventListener("click",this.onSearchBtnClick.bind(this))},t.onSearchBtnClick=function(){var e=l(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===t.target.nodeName||"svg"===t.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return n=t.currentTarget.elements.query.value,(r=t.currentTarget.querySelector(".search-form__error")).textContent="",e.prev=5,e.next=8,d.fetchFilmsOnSearch(n);case 8:return i=e.sent,e.next=11,d.fetchGenresList();case 11:if(a=e.sent,s=this.prepareDataForMarkup(i.results,a.genres),0!==i.results.length){e.next=15;break}throw error;case 15:(new o).render(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.textContent="Search result not successful. Enter the correct movie name and try again";case 22:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),t.onHomeBtnClick=function(e){},t.onMyLibraryBtnClick=function(e){},t.onWatchedBtnClick=function(e){},t.onQueueBtnClick=function(e){},t.showPopularFilms=function(){var e=l(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),e.prev=1,e.next=4,d.fetchPopularFilms(t);case 4:return n=e.sent,e.next=7,d.fetchGenresList();case 7:r=e.sent,i=this.prepareDataForMarkup(n.results,r.genres),(new o).render(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("error");case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),t.prepareDataForMarkup=function(e,t){var n=null;return e.map((function(e){var r=e.genre_ids.reduce((function(e,r){return n=t.find((function(e){return e.id==r})),e.push(n.name),e}),[]);return e.genres=r.join(", "),e.year=e.release_date.slice(0,4),e}))},e}(),g=n("SzhR");n("VwVG"),n("ELjB");function m(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){m(a,r,i,s,o,"next",e)}function o(e){m(a,r,i,s,o,"throw",e)}s(void 0)}))}}g.a.initializeApp({apiKey:"AIzaSyDckuyQARNfaPXRs7Jiz4Xgr28aczvsv5w",authDomain:"crazy-filmoteka.firebaseapp.com",projectId:"crazy-filmoteka",storageBucket:"crazy-filmoteka.appspot.com",messagingSenderId:"827169246677",appId:"1:827169246677:web:2524211488e4048eb1c15c"});var f=n("4AnZ"),v=n.n(f),y=n("fc4V"),b=n.n(y),I=n("LWga"),L=n.n(I);n("awo+");var k=document.querySelector("BODY");k.insertAdjacentHTML("afterbegin",v.a),k.insertAdjacentHTML("beforeend",b.a),k.insertAdjacentHTML("afterbegin",L.a),(new h).init(),function(){var e=g.a.auth(),t=g.a.firestore(),n=document.querySelector("#signup-form");n.addEventListener("submit",(function(r){r.preventDefault();var i=n["signup-email"].value,a=n["signup-password"].value;e.createUserWithEmailAndPassword(i,a).then((function(e){return t.collection("users").doc(e.user.uid).set({watched:[],queue:[]})})).then((function(){var e=document.querySelector("#modal-signup");M.Modal.getInstance(e).close(),n.reset(),n.querySelector(".error").innerHTML=""})).catch((function(e){n.querySelector(".error").innerHTML=e.message}))})),document.querySelector("#logout").addEventListener("click",(function(t){t.preventDefault(),e.signOut().then((function(){}))}));var r=document.querySelector("#login-form");r.addEventListener("submit",(function(t){t.preventDefault();var n=r["login-email"].value,i=r["login-password"].value;e.signInWithEmailAndPassword(n,i).then((function(){var e=document.querySelector("#modal-login");M.Modal.getInstance(e).close(),r.reset(),r.querySelector(".error").innerHTML=""})).catch((function(e){r.querySelector(".error").innerHTML=e.message}))}));var i=function(){var e=p(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("users").doc(n.uid).get();case 2:r=e.sent,i=r.data().queue,console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=p(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("users").doc(n.uid).get();case 2:r=e.sent,i=r.data().watched,console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=p(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("users").doc(n.uid).get();case 2:return r=e.sent,(i=r.data().watched).push({film:"scream"}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=p(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("users").doc(n.uid).get();case 2:return r=e.sent,(i=r.data().queue).push({film:"horse"}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=document.querySelector(".logged-out"),u=document.querySelector(".logged-in"),l=function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(u.classList.add("is-hidden"),c.classList.remove("is-hidden")):(u.classList.remove("is-hidden"),c.classList.add("is-hidden"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.onAuthStateChanged((function(e){e?(l(e),function(e){document.querySelector(".queueBtn").addEventListener("click",(function(n){n.preventDefault(),o(e).then((function(n){t.collection("users").doc(e.uid).set({queue:n},{merge:!0})}))}))}(e),function(e){document.querySelector(".watched").addEventListener("click",(function(n){n.preventDefault(),s(e).then((function(n){t.collection("users").doc(e.uid).set({watched:n},{merge:!0})}))}))}(e),i(e),a(e)):l()}))}(),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)})),document.querySelector('[data-target="modal-signup"]').addEventListener("click",(function(){var e=document.querySelector("#modal-login");M.Modal.getInstance(e).close()}))},fc4V:function(e,t,n){var r='<footer class="footer" data-js="page-footer"> <div class="container"> <p class="footer-description"> © 2021 | All Rights Reserved | <span>Developed with</span> <svg class="footer-description__icon" width="14px" height="14px" alt=""> <use href="'+n("vy/h")(n("4din"),{hash:"#love"})+'"></use> </svg> <span>by</span> <a class="footer-description__link" data-js="team-link"> <span>GoIT Students</span> </a> </p> </div> </footer> ';e.exports=r},yjly:function(e,t,n){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.da03a12d773aeae32680.js.map